!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t(1);Object.defineProperty(n,"JsonType",{enumerable:!0,get:function(){return r.JsonType}});var o=t(2);Object.defineProperty(n,"JsonTransformer",{enumerable:!0,get:function(){return o.JsonTransformer}});var s=t(6);Object.defineProperty(n,"JsonTransformerFunction",{enumerable:!0,get:function(){return s.JsonTransformerFunction}});var i=t(4);Object.defineProperty(n,"JsonTransformerTraversal",{enumerable:!0,get:function(){return i.JsonTransformerTraversal}});var l=t(7);Object.defineProperty(n,"JsonTransformerTraversalRestricted",{enumerable:!0,get:function(){return l.JsonTransformerTraversalRestricted}});var a=t(8);Object.defineProperty(n,"JsonTransformerSome",{enumerable:!0,get:function(){return a.JsonTransformerSome}});var u=t(9);Object.defineProperty(n,"JsonTransformerRandom",{enumerable:!0,get:function(){return u.JsonTransformerRandom}});var c=t(10);Object.defineProperty(n,"JsonTransformerLevel",{enumerable:!0,get:function(){return c.JsonTransformerLevel}});var f=t(11);Object.defineProperty(n,"JsonTransformerTemplate",{enumerable:!0,get:function(){return f.JsonTransformerTemplate}});var v=t(12);Object.defineProperty(n,"JsonTransformerTemplateFunctions",{enumerable:!0,get:function(){return v.JsonTransformerTemplateFunctions}});var d=t(13);Object.defineProperty(n,"JsonFunctionCount",{enumerable:!0,get:function(){return d.JsonFunctionCount}});var m=t(14);Object.defineProperty(n,"JsonFunctionLevel",{enumerable:!0,get:function(){return m.JsonFunctionLevel}});var p=t(15);Object.defineProperty(n,"JsonFunctionMin",{enumerable:!0,get:function(){return p.JsonFunctionMin}});var J=t(16);Object.defineProperty(n,"JsonFunctionMax",{enumerable:!0,get:function(){return J.JsonFunctionMax}});var b=t(17);Object.defineProperty(n,"JsonFunctionSome",{enumerable:!0,get:function(){return b.JsonFunctionSome}});var y=t(18);Object.defineProperty(n,"JsonFunctionSum",{enumerable:!0,get:function(){return y.JsonFunctionSum}})},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonType=void 0,function(e){e[e.Primitive=1]="Primitive",e[e.Array=2]="Array",e[e.Object=3]="Object",e[e.String=4]="String",e[e.Number=5]="Number",e[e.Boolean=6]="Boolean",e[e.Null=7]="Null"}(n.JsonType||(n.JsonType={}))},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformer=void 0;class r{constructor({init:e,data:n={},level:t=0}={}){this._pipe_transformers=[],Object.assign(this,{init:e,data:n,level:t}),this._root=this}get root(){return this._root}transformerPipe(e){let n=e.value;for(const t of this._pipe_transformers)n=t.transform({value:n,data:e.data,level:e.level});return n}transform({value:e,data:n={},level:t=0}){const r=Object.assign({},n);Object.setPrototypeOf(r,this.data);let s=e;for(const[n,i]of Object.entries(o)){const o=this[n];null!=o&&i(s)&&(s=o({value:e,data:r,level:t}))}return s=this.transformerPipe({value:s,data:r,level:t}),s}pipe(...e){if(0===e.length)return this._pipe_transformers=[],this;for(const n of e)Object.setPrototypeOf(n.data,this.data),n._root=this._root;return this._pipe_transformers=e,e[0]}static isJsonPrimitive(e){const n=typeof e;return null==n||"string"===n||"number"===n||"boolean"===n}static isJsonArray(e){return Array.isArray(e)}static isJsonObject(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}static isJsonString(e){return"string"==typeof e}static isJsonNumber(e){return"number"==typeof e}static isJsonBoolean(e){return"boolean"==typeof e}static isJsonNull(e){return null==e}}n.JsonTransformer=r;const o={transformerJsonPrimitive:r.isJsonPrimitive,transformerJsonArray:r.isJsonArray,transformerJsonObject:r.isJsonObject,transformerJsonString:r.isJsonString,transformerJsonNumber:r.isJsonNumber,transformerJsonBoolean:r.isJsonBoolean,transformerJsonNull:r.isJsonNull};n.default=r},function(e,n){e.exports=require("util")},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTraversal=void 0;const r=t(2);class o extends r.JsonTransformer{constructor(e={}){super(e),this.transformerJsonPrimitive=({value:e})=>e,this.transformerJsonArray=({value:e,data:n,level:t})=>{const r=t+1,o=[];for(const t of e)o.push(this.transform({value:t,data:n,level:r}));return o},this.transformerJsonObject=({value:e,data:n,level:t})=>{const r=t+1,o={};for(const[t,s]of Object.entries(e))o[this.transform({value:t,data:n,level:r})]=this.transform({value:s,data:n,level:r});return o}}}n.JsonTransformerTraversal=o,n.default=o},function(e,n,t){e.exports=t(19)},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerFunction=void 0;const r=t(1),o=t(2);class s extends o.JsonTransformer{constructor(e={}){var n;if(super(e),this.a_functions={[r.JsonType.Array]:{},[r.JsonType.Object]:{},[r.JsonType.String]:{}},this.transformerJsonArray=e=>{if(0===e.value.length)return e.value;const n=this.a_functions[r.JsonType.Array][e.value[0]];return null==n?e.value:n(e)},this.transformerJsonObject=e=>{var n;const t=null!==(n=e.value[s.functionAttribute])&&void 0!==n?n:"";if("string"==typeof t){const n=this.a_functions[r.JsonType.Object][t];return null==n?e.value:n(e)}return e.value},this.transformerJsonString=e=>{const n=this.a_functions[r.JsonType.String][e.value];return null==n?e.value:n(e)},Array.isArray(null===(n=null==e?void 0:e.init)||void 0===n?void 0:n.functions))for(const n of e.init.functions)null!=n.type&&(this.a_functions[n.type][n.init.function]=n)}}n.JsonTransformerFunction=s,s.functionAttribute="$function",n.default=s},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTraversalRestricted=void 0;const r=t(4);class o extends r.JsonTransformerTraversal{constructor(e={}){var n,t,r,o;super(Object.assign(Object.assign({},e),{init:{minLevel:null!==(t=null===(n=null==e?void 0:e.init)||void 0===n?void 0:n.minLevel)&&void 0!==t?t:0,maxLevel:null!==(o=null===(r=null==e?void 0:e.init)||void 0===r?void 0:r.maxLevel)&&void 0!==o?o:1/0}}))}transformerPipe(e){return this.init.minLevel<=e.level&&e.level<=this.init.maxLevel?super.transformerPipe(e):e.value}}n.JsonTransformerTraversalRestricted=o,n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerSome=void 0;const r=t(2);class o extends r.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:"$some"})),this.transformerJsonArray=({value:e})=>{const n=e.length;return 0===n||e[0]!==this.init?e:1===n?null:e[Math.floor(Math.random()*(n-1))+1]}}}n.JsonTransformerSome=o,n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerRandom=void 0;const r=t(2);class o extends r.JsonTransformer{constructor(e={}){var n,t,r,o,s,i,l,a,u,c,f,v,d,m,p,J,b,y,g,T,$,h,O,j;super(Object.assign(Object.assign({},e),{init:{functionAttr:null!==(t=null===(n=null==e?void 0:e.init)||void 0===n?void 0:n.functionAttr)&&void 0!==t?t:"$function",function:null!==(o=null===(r=null==e?void 0:e.init)||void 0===r?void 0:r.function)&&void 0!==o?o:"$random",minAttr:null!==(i=null===(s=null==e?void 0:e.init)||void 0===s?void 0:s.minAttr)&&void 0!==i?i:"$min",min:null!==(a=null===(l=null==e?void 0:e.init)||void 0===l?void 0:l.min)&&void 0!==a?a:0,maxAttr:null!==(c=null===(u=null==e?void 0:e.init)||void 0===u?void 0:u.maxAttr)&&void 0!==c?c:"$max",max:null!==(v=null===(f=null==e?void 0:e.init)||void 0===f?void 0:f.max)&&void 0!==v?v:1,isIntegerAttr:null!==(m=null===(d=null==e?void 0:e.init)||void 0===d?void 0:d.isIntegerAttr)&&void 0!==m?m:"$isInteger",isInteger:null!==(J=null===(p=null==e?void 0:e.init)||void 0===p?void 0:p.isInteger)&&void 0!==J&&J,scaleAttr:null!==(y=null===(b=null==e?void 0:e.init)||void 0===b?void 0:b.scale)&&void 0!==y?y:"$scale",scale:null!==(T=null===(g=null==e?void 0:e.init)||void 0===g?void 0:g.scale)&&void 0!==T?T:null,gzpAttr:null!==(h=null===($=null==e?void 0:e.init)||void 0===$?void 0:$.gzp)&&void 0!==h?h:"$gzp",gzp:null!==(j=null===(O=null==e?void 0:e.init)||void 0===O?void 0:O.gzp)&&void 0!==j?j:1}})),this.transformerJsonObject=({value:e,data:n})=>{var t,r,o,s,i;const l=this.init,a=null!==(t=null==e?void 0:e[l.minAttr])&&void 0!==t?t:l.min,u=null!==(r=null==e?void 0:e[l.maxAttr])&&void 0!==r?r:l.max;if((null==e?void 0:e[l.functionAttr])!==l.function||!Number.isFinite(a)||!Number.isFinite(u))return e;const c=null!==(o=null==e?void 0:e[l.isIntegerAttr])&&void 0!==o?o:l.isInteger,f=null!==(s=null==e?void 0:e[l.gzpAttr])&&void 0!==s?s:l.gzp,v=n[null!==(i=null==e?void 0:e[l.scaleAttr])&&void 0!==i?i:l.scale],d=Math.random();let m;return m=c?Math.floor(a+d*(u+1-a)):a+d*(u-a),Number.isFinite(f)&&0<=f&&f<1&&(m*=Math.random()>=f?1:-1),Number.isFinite(v)?m*v:m}}}n.JsonTransformerRandom=o,n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerLevel=void 0;const r=t(2);class o extends r.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:"$level"})),this.transformerJsonString=({value:e,level:n})=>e===this.init?n:e}}n.JsonTransformerLevel=o,n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTemplate=void 0;const r=t(2);class o extends r.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:/\${([\w\d@_-]+)}/})),this.transformerJsonString=({value:e,data:n})=>{const t=new RegExp(this.init,"g"),r=e,o=r.match(new RegExp(`^${this.init.toString().slice(1,-1)}$`)),s=e=>{const r=e.matchAll(t),o=[];let i=r.next();if(i.done)return e;for(;!i.done;){const e=i.value,t=n[e[1]],l="string"==typeof t?t:JSON.stringify(t);null!=t&&o.push([e[0],s(l)]),i=r.next()}for(const n of o)e=e.replace(n[0],n[1]);return e};return null!=o?n[o[1]]:s(r)}}}n.JsonTransformerTemplate=o,n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTemplateFunctions=void 0;const r=t(2);class o extends r.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:/\${([\w\d@_-]+)(}|\([\s\w\d@_,:'"<>{}\[\]-]*\)})/})),this.transformerJsonString=({value:e,data:n})=>{const t=new RegExp(this.init,"g"),r=e,o=r.match(new RegExp(`^${this.init.toString().slice(1,-1)}$`)),s=(e,t)=>{var r;const o=null==e?null:n[e],s=null!==(r=null==t?void 0:t.slice(1,-2).replace(/'/g,'"'))&&void 0!==r?r:"";let i;if(t.length>1){try{i=JSON.parse(s)}catch(e){i=e.message}return[o,i]}return[o,null]};return((e,r)=>{var o;const i=e.matchAll(t),l=[];let a=i.next();if(a.done)return e;for(;!a.done;){const e=a.value,[t,u]=s(e[1],e[2]);if(null!=t){let s;if("function"==typeof t){const e=t({value:u,data:n,level:this.level});s=r&&"string"!=typeof e?JSON.stringify(e):e}else s=null!=u?e[0]:r?null!==(o=t)&&void 0!==o?o:"":t;l.push([e[0],s])}a=i.next()}if(r){for(const n of l)e=e.replace(n[0],n[1]);return e}return l[0][1]})(r,null==o||1==o.length)}}}n.JsonTransformerTemplateFunctions=o,n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionCount=void 0;const r=t(1);function o({value:e}){return 0===e.length||e[0]!==o.init.function?e:e.length-1}n.JsonFunctionCount=o,o.type=r.JsonType.Array,o.init={function:"$count"},n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionLevel=void 0;const r=t(1);function o({value:e,level:n}){return e===o.init.function?n:e}n.JsonFunctionLevel=o,o.type=r.JsonType.String,o.init={function:"$level"},n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionMin=void 0;const r=t(1);function o({value:e}){return 0===e.length||e[0]!==o.init.function?e:e.slice(1).reduce((e,n)=>Math.min(e,n),1/0)}n.JsonFunctionMin=o,o.type=r.JsonType.Array,o.init={function:"$min"},n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionMax=void 0;const r=t(1);function o({value:e}){return 0===e.length||e[0]!==o.init.function?e:e.slice(1).reduce((e,n)=>Math.max(e,n),-1/0)}n.JsonFunctionMax=o,o.type=r.JsonType.Array,o.init={function:"$max"},n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionSome=void 0;const r=t(1);function o({value:e}){const n=e.length;return 0===n||e[0]!==o.init.function?e:1===n?null:e[Math.floor(Math.random()*(n-1))+1]}n.JsonFunctionSome=o,o.type=r.JsonType.Array,o.init={function:"$some"},n.default=o},function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionSum=void 0;const r=t(1);function o({value:e}){return 0===e.length||e[0]!==o.init.function?e:e.slice(1).reduce((e,n)=>e+n,0)}n.JsonFunctionSum=o,o.type=r.JsonType.Array,o.init={function:"$sum"},n.default=o},function(e,n,t){"use strict";t.r(n);var r=t(0),o=t(3),s=t.n(o);
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const i={compact:!0,depth:10,breakLength:80,colors:!0};var l=function(e){console.log("============================================================================================"),console.log("== "+e),console.log("============================================================================================"),console.group(),console.log("------------------------------------------------------------------------------------------")},a=function(e,n){console.log(s.a.inspect(n,i).replace(/'/g,'"')),console.log("→"),console.log(s.a.inspect(e.transform({value:n}),i).replace(/'/g,'"')),console.log("------------------------------------------------------------------------------------------")},u=function(){console.groupEnd(),console.log()};
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */const c=(new r.JsonTransformerTraversal).pipe(new r.JsonTransformerSome).root;l("$some (es6)"),a(c,["$some"]),a(c,["$some",5]);for(let e=0;e<5;e++)a(c,["$some",5,7,9]);l("$level before $some (es6)");const f=(new r.JsonTransformerTraversal).pipe(new r.JsonTransformerLevel).pipe(new r.JsonTransformerSome).root;for(let e=0;e<3;e++)a(f,["$some","$level",["$level"],[["$level"]]]);for(let e=0;e<3;e++)a(f,{someValue:["$some","$level",["$level"],[["$level"]]]});l("$some before $level (es6)");const v=(new r.JsonTransformer).pipe((new r.JsonTransformerTraversal).pipe(new r.JsonTransformerSome).root,(new r.JsonTransformerTraversal).pipe(new r.JsonTransformerLevel).root).root;for(let e=0;e<3;e++)a(v,["$some","$level",["$level"],[["$level"]]]);for(let e=0;e<3;e++)a(v,{someValue:["$some","$level",["$level"],[["$level"]]]});u();
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const d=(new r.JsonTransformerTraversal).pipe(new r.JsonTransformerLevel).root;l("$level (es6)"),a(d,"$level"),a(d,["$level",{level:"$level"},["$level",["$level"]]]),a(d,["$level",{level:"$level"},["$level",["$level",["$level",{level:"$level"},["$level",["$level"]]]]]]),u();
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const m=new r.JsonTransformerTraversal({data:{abc:123,hello:"Hallo",name:"Wolfgang"}}).pipe(new r.JsonTransformerLevel).pipe(new r.JsonTransformerTemplate).root;l("Templates with Placeholders ${name} (es6))"),a(m,"${abc}"),a(m,"${hello}, ${name}!"),a(m,"${hello}, ${name}! ${HowAreYou}"),a(m,[["${abc}"],{abc:"${abc}","${abc}":"abc"},"${name}"]),u();
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const p=new r.JsonTransformerTraversal({data:{abc:123,hello:"Hallo",name:"Wolfgang",fps:50,vpf:({value:e,data:n})=>[e.x/n.fps,e.y/n.fps],def:()=>123}}).pipe(new r.JsonTransformerLevel).pipe(new r.JsonTransformerTemplateFunctions).root;l("Templates with Placeholders ${name(...)} and Function Calls (csj)"),a(p,"${abc}"),a(p,"${hello}, ${name}!"),a(p,"${hello}, ${name}! ${HowAreYou}"),a(p,[["${abc}"],{abc:"${abc}","${abc}":"abc"},"${name}"]),a(p,"${vpf({'x':100, 'y':200})}"),a(p,"{v: ${vpf({'x':100, 'y':200})}}"),a(p,{v:"${vpf({'x':100, 'y':200})}"}),a(p,[{v:"${vpf({'x':100, 'y':200})}"},{a:"${vpf({'x':200, 'y':400})}"}]),a(p,"${def()}"),u()}]);
!function(e){var n={};function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=5)}([function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=r(1);Object.defineProperty(n,"JsonType",{enumerable:!0,get:function(){return t.JsonType}});var o=r(2);Object.defineProperty(n,"JsonTransformer",{enumerable:!0,get:function(){return o.JsonTransformer}});var s=r(6);Object.defineProperty(n,"JsonTransformerFunction",{enumerable:!0,get:function(){return s.JsonTransformerFunction}});var l=r(4);Object.defineProperty(n,"JsonTransformerTraversal",{enumerable:!0,get:function(){return l.JsonTransformerTraversal}});var i=r(7);Object.defineProperty(n,"JsonTransformerTraversalRestricted",{enumerable:!0,get:function(){return i.JsonTransformerTraversalRestricted}});var a=r(8);Object.defineProperty(n,"JsonTransformerSome",{enumerable:!0,get:function(){return a.JsonTransformerSome}});var u=r(9);Object.defineProperty(n,"JsonTransformerLevel",{enumerable:!0,get:function(){return u.JsonTransformerLevel}});var c=r(10);Object.defineProperty(n,"JsonTransformerTemplate",{enumerable:!0,get:function(){return c.JsonTransformerTemplate}});var f=r(11);Object.defineProperty(n,"JsonTransformerTemplateFunctions",{enumerable:!0,get:function(){return f.JsonTransformerTemplateFunctions}});var v=r(12);Object.defineProperty(n,"JsonFunctionSome",{enumerable:!0,get:function(){return v.JsonFunctionSome}});var m=r(13);Object.defineProperty(n,"JsonFunctionCount",{enumerable:!0,get:function(){return m.JsonFunctionCount}});var d=r(14);Object.defineProperty(n,"JsonFunctionSum",{enumerable:!0,get:function(){return d.JsonFunctionSum}});var p=r(15);Object.defineProperty(n,"JsonFunctionMin",{enumerable:!0,get:function(){return p.JsonFunctionMin}});var J=r(16);Object.defineProperty(n,"JsonFunctionMax",{enumerable:!0,get:function(){return J.JsonFunctionMax}});var b=r(17);Object.defineProperty(n,"JsonFunctionLevel",{enumerable:!0,get:function(){return b.JsonFunctionLevel}})},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonType=void 0,function(e){e[e.Primitive=1]="Primitive",e[e.Array=2]="Array",e[e.Object=3]="Object",e[e.String=4]="String",e[e.Number=5]="Number",e[e.Boolean=6]="Boolean",e[e.Null=7]="Null"}(n.JsonType||(n.JsonType={}))},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformer=void 0;class t{constructor({init:e,data:n={},level:r=0}={}){this._pipe_transformers=[],Object.assign(this,{init:e,data:n,level:r}),this._root=this}get root(){return this._root}transformerPipe(e){let n=e.value;for(const r of this._pipe_transformers)n=r.transform({value:n,data:e.data,level:e.level});return n}transform({value:e,data:n={},level:r=0}){const t=Object.assign({},n);Object.setPrototypeOf(t,this.data);let s=e;for(const[n,l]of Object.entries(o)){const o=this[n];null!=o&&l(s)&&(s=o({value:e,data:t,level:r}))}return s=this.transformerPipe({value:s,data:t,level:r}),s}pipe(...e){if(0===e.length)return this._pipe_transformers=[],this;for(const n of e)Object.setPrototypeOf(n.data,this.data),n._root=this._root;return this._pipe_transformers=e,e[0]}static isJsonPrimitive(e){const n=typeof e;return null==n||"string"===n||"number"===n||"boolean"===n}static isJsonArray(e){return Array.isArray(e)}static isJsonObject(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}static isJsonString(e){return"string"==typeof e}static isJsonNumber(e){return"number"==typeof e}static isJsonBoolean(e){return"boolean"==typeof e}static isJsonNull(e){return null==e}}n.JsonTransformer=t;const o={transformerJsonPrimitive:t.isJsonPrimitive,transformerJsonArray:t.isJsonArray,transformerJsonObject:t.isJsonObject,transformerJsonString:t.isJsonString,transformerJsonNumber:t.isJsonNumber,transformerJsonBoolean:t.isJsonBoolean,transformerJsonNull:t.isJsonNull};n.default=t},function(e,n){e.exports=require("util")},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTraversal=void 0;const t=r(2);class o extends t.JsonTransformer{constructor(e={}){super(e),this.transformerJsonPrimitive=({value:e})=>e,this.transformerJsonArray=({value:e,data:n,level:r})=>{const t=r+1,o=[];for(const r of e)o.push(this.transform({value:r,data:n,level:t}));return o},this.transformerJsonObject=({value:e,data:n,level:r})=>{const t=r+1,o={};for(const[r,s]of Object.entries(e))o[this.transform({value:r,data:n,level:t})]=this.transform({value:s,data:n,level:t});return o}}}n.JsonTransformerTraversal=o,n.default=o},function(e,n,r){e.exports=r(18)},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerFunction=void 0;const t=r(1),o=r(2);class s extends o.JsonTransformer{constructor(e={}){var n,r,o;if(super(Object.assign(Object.assign({},e),{init:Object.assign(Object.assign({},e.init),{functionAttribute:null!==(r=null===(n=null==e?void 0:e.init)||void 0===n?void 0:n.functionAttribute)&&void 0!==r?r:"$function"})})),this.v_functions={[t.JsonType.Array]:{},[t.JsonType.Object]:{},[t.JsonType.String]:{}},this.transformerJsonArray=e=>{if(0===e.value.length)return e.value;const n=this.v_functions[t.JsonType.Array][e.value[0]];return null==n?e.value:n(e)},this.transformerJsonObject=e=>{var n;const r=null!==(n=e.value[this.init.functionAttribute])&&void 0!==n?n:"";if("string"==typeof r&&null!=e.value[r]){const n=this.v_functions[t.JsonType.Object][r];return null==n?e.value:n(e)}return e.value},this.transformerJsonString=e=>{const n=this.v_functions[t.JsonType.String][e.value];return null==n?e.value:n(e)},Array.isArray(null===(o=null==e?void 0:e.init)||void 0===o?void 0:o.functions))for(const n of e.init.functions)null!=n.type&&(this.v_functions[n.type][n.init]=n)}}n.JsonTransformerFunction=s,n.default=s},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTraversalRestricted=void 0;const t=r(4);class o extends t.JsonTransformerTraversal{constructor(e={}){var n,r,t,o;super(Object.assign(Object.assign({},e),{init:{minLevel:null!==(r=null===(n=null==e?void 0:e.init)||void 0===n?void 0:n.minLevel)&&void 0!==r?r:0,maxLevel:null!==(o=null===(t=null==e?void 0:e.init)||void 0===t?void 0:t.maxLevel)&&void 0!==o?o:1/0}}))}transformerPipe(e){return this.init.minLevel<=e.level&&e.level<=this.init.maxLevel?super.transformerPipe(e):e.value}}n.JsonTransformerTraversalRestricted=o,n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerSome=void 0;const t=r(2);class o extends t.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:"$some"})),this.transformerJsonArray=({value:e})=>{const n=e.length;return 0===n||e[0]!==this.init?e:1===n?null:e[Math.floor(Math.random()*(n-1))+1]}}}n.JsonTransformerSome=o,n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerLevel=void 0;const t=r(2);class o extends t.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:"$level"})),this.transformerJsonString=({value:e,level:n})=>e===this.init?n:e}}n.JsonTransformerLevel=o,n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTemplate=void 0;const t=r(2);class o extends t.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:/\${([\w\d@_-]+)}/})),this.transformerJsonString=({value:e,data:n})=>{const r=new RegExp(this.init,"g"),t=e,o=t.match(new RegExp(`^${this.init.toString().slice(1,-1)}$`)),s=e=>{const t=e.matchAll(r),o=[];let l=t.next();if(l.done)return e;for(;!l.done;){const e=l.value,r=n[e[1]];null!=r&&o.push([e[0],s(r)]),l=t.next()}for(const n of o)e=e.replace(n[0],n[1]);return e};return null!=o?n[o[1]]:s(t)}}}n.JsonTransformerTemplate=o,n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonTransformerTemplateFunctions=void 0;const t=r(2);class o extends t.JsonTransformer{constructor(e={}){var n;super(Object.assign(Object.assign({},e),{init:null!==(n=null==e?void 0:e.init)&&void 0!==n?n:/\${([\w\d@_-]+)(}|\([\s\w\d@_,:'"<>{}\[\]-]*\)})/})),this.transformerJsonString=({value:e,data:n})=>{const r=new RegExp(this.init,"g"),t=e,o=t.match(new RegExp(`^${this.init.toString().slice(1,-1)}$`)),s=(e,r)=>{var t;const o=null==e?null:n[e],s=null!==(t=null==r?void 0:r.slice(1,-2).replace(/'/g,'"'))&&void 0!==t?t:"";let l;if(r.length>1){try{l=JSON.parse(s)}catch(e){l=e.message}return[o,l]}return[o,null]};return((e,t)=>{var o;const l=e.matchAll(r),i=[];let a=l.next();if(a.done)return e;for(;!a.done;){const e=a.value,[r,u]=s(e[1],e[2]);if(null!=r){let s;if("function"==typeof r){const e=r({value:u,data:n,level:this.level});s=t&&"string"!=typeof e?JSON.stringify(e):e}else s=null!=u?e[0]:t?null!==(o=r)&&void 0!==o?o:"":r;i.push([e[0],s])}a=l.next()}if(t){for(const n of i)e=e.replace(n[0],n[1]);return e}return i[0][1]})(t,null==o||1==o.length)}}}n.JsonTransformerTemplateFunctions=o,n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionSome=void 0;const t=r(1);function o({value:e}){const n=e.length;return 0===n||e[0]!==o.init?e:1===n?null:e[Math.floor(Math.random()*(n-1))+1]}n.JsonFunctionSome=o,o.type=t.JsonType.Array,o.init="$some",n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionCount=void 0;const t=r(1);function o({value:e}){return 0===e.length||e[0]!==o.init?e:e.length-1}n.JsonFunctionCount=o,o.type=t.JsonType.Array,o.init="$count",n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionSum=void 0;const t=r(1);function o({value:e}){return 0===e.length||e[0]!==o.init?e:e.slice(1).reduce((e,n)=>e+n,0)}n.JsonFunctionSum=o,o.type=t.JsonType.Array,o.init="$sum",n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionMin=void 0;const t=r(1);function o({value:e}){return 0===e.length||e[0]!==o.init?e:e.slice(1).reduce((e,n)=>Math.min(e,n),1/0)}n.JsonFunctionMin=o,o.type=t.JsonType.Array,o.init="$min",n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionMax=void 0;const t=r(1);function o({value:e}){return 0===e.length||e[0]!==o.init?e:e.slice(1).reduce((e,n)=>Math.max(e,n),-1/0)}n.JsonFunctionMax=o,o.type=t.JsonType.Array,o.init="$max",n.default=o},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.JsonFunctionLevel=void 0;const t=r(1);function o({value:e,level:n}){return e===o.init?n:e}n.JsonFunctionLevel=o,o.type=t.JsonType.String,o.init="$level",n.default=o},function(e,n,r){"use strict";r.r(n);var t=r(0),o=r(3),s=r.n(o);
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const l={compact:!0,depth:10,breakLength:80,colors:!0};var i=function(e){console.log("============================================================================================"),console.log("== "+e),console.log("============================================================================================"),console.group(),console.log("------------------------------------------------------------------------------------------")},a=function(e,n){console.log(s.a.inspect(n,l).replace(/'/g,'"')),console.log("→"),console.log(s.a.inspect(e.transform({value:n}),l).replace(/'/g,'"')),console.log("------------------------------------------------------------------------------------------")},u=function(){console.groupEnd(),console.log()};
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */const c=(new t.JsonTransformerTraversal).pipe(new t.JsonTransformerSome).root;i("$some (es6)"),a(c,["$some"]),a(c,["$some",5]);for(let e=0;e<5;e++)a(c,["$some",5,7,9]);i("$level before $some (es6)");const f=(new t.JsonTransformerTraversal).pipe(new t.JsonTransformerLevel).pipe(new t.JsonTransformerSome).root;for(let e=0;e<3;e++)a(f,["$some","$level",["$level"],[["$level"]]]);for(let e=0;e<3;e++)a(f,{someValue:["$some","$level",["$level"],[["$level"]]]});i("$some before $level (es6)");const v=(new t.JsonTransformer).pipe((new t.JsonTransformerTraversal).pipe(new t.JsonTransformerSome).root,(new t.JsonTransformerTraversal).pipe(new t.JsonTransformerLevel).root).root;for(let e=0;e<3;e++)a(v,["$some","$level",["$level"],[["$level"]]]);for(let e=0;e<3;e++)a(v,{someValue:["$some","$level",["$level"],[["$level"]]]});u();
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const m=(new t.JsonTransformerTraversal).pipe(new t.JsonTransformerLevel).root;i("$level (es6)"),a(m,"$level"),a(m,["$level",{level:"$level"},["$level",["$level"]]]),a(m,["$level",{level:"$level"},["$level",["$level",["$level",{level:"$level"},["$level",["$level"]]]]]]),u();
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const d=new t.JsonTransformerTraversal({data:{abc:123,hello:"Hallo",name:"Wolfgang"}}).pipe(new t.JsonTransformerLevel).pipe(new t.JsonTransformerTemplate).root;i("Templates with Placeholders ${name} (es6))"),a(d,"${abc}"),a(d,"${hello}, ${name}!"),a(d,"${hello}, ${name}! ${HowAreYou}"),a(d,[["${abc}"],{abc:"${abc}","${abc}":"abc"},"${name}"]),u();
/**
 * @author    Wolfgang L. J. Kowarschick <kowa@hs-augsburg.de>
 * @copyright 2020 © Wolfgang L. J. Kowarschick
 * @license   MIT
 */
const p=new t.JsonTransformerTraversal({data:{abc:123,hello:"Hallo",name:"Wolfgang",fps:50,vpf:({value:e,data:n})=>[e.x/n.fps,e.y/n.fps],def:()=>123}}).pipe(new t.JsonTransformerLevel).pipe(new t.JsonTransformerTemplateFunctions).root;i("Templates with Placeholders ${name(...)} and Function Calls (csj)"),a(p,"${abc}"),a(p,"${hello}, ${name}!"),a(p,"${hello}, ${name}! ${HowAreYou}"),a(p,[["${abc}"],{abc:"${abc}","${abc}":"abc"},"${name}"]),a(p,"${vpf({'x':100, 'y':200})}"),a(p,"{v: ${vpf({'x':100, 'y':200})}}"),a(p,{v:"${vpf({'x':100, 'y':200})}"}),a(p,[{v:"${vpf({'x':100, 'y':200})}"},{a:"${vpf({'x':200, 'y':400})}"}]),a(p,"${def()}"),u()}]);